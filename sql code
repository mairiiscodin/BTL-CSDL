CREATE DATABASE QLCH

-- Bảng chức vụ
CREATE TABLE ChucVu (
    MaChucVu INT PRIMARY KEY,
    TenChucVu VARCHAR(20) 
);

-- Bảng Nhân viên
CREATE TABLE NhanVien (
    MaNhanVien INT PRIMARY KEY,
    MaChucVu INT,
    HoTen VARCHAR(100),
    GioiTinh VARCHAR(10),
    SoDienThoai VARCHAR(15) UNIQUE, 
    NgaySinh DATE,
    DiaChi VARCHAR(255),
    FOREIGN KEY (MaChucVu) REFERENCES ChucVu(MaChucVu)
);

-- Bảng Nhân viên FullTime
CREATE TABLE FullTime (
    MaNhanVien INT PRIMARY KEY,
    HopDongDaiHan VARCHAR(50),
    LuongCoBan DECIMAL(15, 2),
    FOREIGN KEY (MaNhanVien) REFERENCES NhanVien(MaNhanVien)
);

-- Bảng Nhân viên PartTime
CREATE TABLE PartTime (
    MaNhanVien INT PRIMARY KEY,
    SoGioLam DECIMAL(15, 2),
    LuongTheoGio DECIMAL(15, 2),
    FOREIGN KEY (MaNhanVien) REFERENCES NhanVien(MaNhanVien)
);

-- Bảng Lương
CREATE TABLE Luong (
    MaNhanVien INT PRIMARY KEY,
    ThoiGian INT,
    NghiKhongPhep INT NOT NULL,
    LuongThang13 DECIMAL(15,2) NOT NULL,
    NgayBatDau DATE,
    FOREIGN KEY (MaNhanVien) REFERENCES NhanVien(MaNhanVien)
);

-- Bảng Khách hàng
CREATE TABLE KhachHang (
    MaKhachHang INT PRIMARY KEY,
    TenKhachHang VARCHAR(100),
    SDT VARCHAR(15),
    GioiTinh VARCHAR(10),
    DiaChi VARCHAR(255)
);

-- Bảng Khách hàng VIP
CREATE TABLE KhachHangVIP (
    MaKhachHang INT PRIMARY KEY,
    DiemTichLuy INT,
    MucGiamGia DECIMAL(5,2),
    FOREIGN KEY (MaKhachHang) REFERENCES KhachHang(MaKhachHang)
);

-- Bảng Khách hàng thành viên
CREATE TABLE KhachHangThanhVien (
    MaKhachHang INT PRIMARY KEY,
    NgayDangKy DATE,
    LoaiThe VARCHAR(10),
    FOREIGN KEY (MaKhachHang) REFERENCES KhachHang(MaKhachHang)
);

-- Bảng Phản hồi
CREATE TABLE PhanHoi (
    MaPhanHoi INT PRIMARY KEY,
    MaKhachHang INT,
    DanhGiaSanPham VARCHAR(255),
    DongGop VARCHAR(255),
    FOREIGN KEY (MaKhachHang) REFERENCES KhachHang(MaKhachHang)
);

-- Bảng Loại hàng
CREATE TABLE LoaiHang (
    MaLoaiHang INT PRIMARY KEY,
    TenLoaiHang VARCHAR(100),
    MauMa VARCHAR(100),
    NoiSanXuat VARCHAR(255)
);

-- Bảng Hàng hóa
CREATE TABLE HangHoa (
    MaHH INT PRIMARY KEY,
    MaLoaiHang INT,
    TenHangHoa VARCHAR(100),
    SoLuong INT,
    NgaySX DATE,
    HSD DATE,
    GiaBan DECIMAL(15,2),
    FOREIGN KEY (MaLoaiHang) REFERENCES LoaiHang(MaLoaiHang)
);

-- Bảng Hóa đơn
CREATE TABLE HoaDon (
    MaHoaDon INT PRIMARY KEY,
    NgayLapHoaDon DATE,
    NgayNhanHang DATE,
    MaNhanVien INT,
    MaKhachHang INT,
    FOREIGN KEY (MaNhanVien) REFERENCES NhanVien(MaNhanVien),
    FOREIGN KEY (MaKhachHang) REFERENCES KhachHang(MaKhachHang)
);

-- Bảng Chi tiết hóa đơn
CREATE TABLE ChiTietHoaDon (
    MaHoaDon INT,
    MaHH INT,
    SoLuong DECIMAL,
    PRIMARY KEY (MaHoaDon, MaHH),
    FOREIGN KEY (MaHoaDon) REFERENCES HoaDon(MaHoaDon),
    FOREIGN KEY (MaHH) REFERENCES HangHoa(MaHH)
);
